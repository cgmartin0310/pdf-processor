<!-- templates/settings.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Settings - Referral App</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-5">
    <h2>Settings</h2>
    <form method="POST">
        {{ form.hidden_tag() }}
        <div class="form-group">
            {{ form.SENDGRID_FROM_EMAIL.label(class="form-control-label") }}
            {{ form.SENDGRID_FROM_EMAIL(class="form-control") }}
            {% for error in form.SENDGRID_FROM_EMAIL.errors %}
                <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.SENDGRID_TO_EMAIL.label(class="form-control-label") }}
            {{ form.SENDGRID_TO_EMAIL(class="form-control") }}
            {% for error in form.SENDGRID_TO_EMAIL.errors %}
                <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.EMAIL_HOST.label(class="form-control-label") }}
            {{ form.EMAIL_HOST(class="form-control") }}
            {% for error in form.EMAIL_HOST.errors %}
                <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.EMAIL_PORT.label(class="form-control-label") }}
            {{ form.EMAIL_PORT(class="form-control") }}
            {% for error in form.EMAIL_PORT.errors %}
                <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.EMAIL_USERNAME.label(class="form-control-label") }}
            {{ form.EMAIL_USERNAME(class="form-control") }}
            {% for error in form.EMAIL_USERNAME.errors %}
                <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </div>
        <div class="form-group form-check">
            {{ form.ENABLE_EMAIL_CSV(class="form-check-input") }}
            {{ form.ENABLE_EMAIL_CSV.label(class="form-check-label") }}
        </div>
        <div class="form-group">
            {{ form.CSV_EMAIL_RECIPIENT.label(class="form-control-label") }}
            {{ form.CSV_EMAIL_RECIPIENT(class="form-control") }}
            {% for error in form.CSV_EMAIL_RECIPIENT.errors %}
                <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.CSV_EMAIL_SUBJECT.label(class="form-control-label") }}
            {{ form.CSV_EMAIL_SUBJECT(class="form-control") }}
            {% for error in form.CSV_EMAIL_SUBJECT.errors %}
                <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.CSV_EMAIL_BODY.label(class="form-control-label") }}
            {{ form.CSV_EMAIL_BODY(class="form-control", rows="3") }}
            {% for error in form.CSV_EMAIL_BODY.errors %}
                <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </div>
        <hr>
        <div class="form-group">
            {{ form.PATIENT_DETAILS.label(class="form-control-label") }}
            {{ form.PATIENT_DETAILS(class="form-control", rows="2") }}
            <small class="form-text text-muted">Enter comma-separated patient detail fields (e.g., name, dob, sex)</small>
            {% for error in form.PATIENT_DETAILS.errors %}
                <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.RECORD_DETAILS.label(class="form-control-label") }}
            {{ form.RECORD_DETAILS(class="form-control", rows="2") }}
            <small class="form-text text-muted">Enter comma-separated record detail fields (e.g., insurance_name, insurance_id)</small>
            {% for error in form.RECORD_DETAILS.errors %}
                <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </div>
        {{ form.submit(class="btn btn-primary") }}
    </form>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="mt-3">
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
</div>
</body>
</html>

